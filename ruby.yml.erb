GENERATOR:
  PackageName: ruby
  PackageDescription: "Package ruby is a wrapper for creating Ruby native extension in Go"
  PackageLicense: "THE AUTOGENERATED LICENSE. ALL THE RIGHTS ARE RESERVED BY ROBOTS."
  Includes:
    - "ruby.h"
  Options:
    SafeStrings: true

PARSER:
  IncludePaths: <%= include_paths.to_s %>

  SourcesPaths: <%= source_paths %>

  Defines:
    __APPLE__: null

TRANSLATOR:
  ConstRules:
    defines: expand
    enum: eval

  Rules:
    global:
      - {action: replace, from: "^_$", to: "arg"}

    const:
      - {action: accept, from: "^Q"}

      - {load: snakecase}
      - {transform: export}

    function:
      # FIXME: Because both `rb_hash` and `rb_Hash` are defined, causing the automatically generated function to duplicate and cause an error.
      - {action: ignore, from: "^rb_Hash$"}

      # FIXME: Following cannot be successfully auto-generated by c-for-go...
      - {action: ignore, from: "^rb_gc_update_tbl_refs$"}
      - {action: ignore, from: "^rb_fd_select$"}
      - {action: ignore, from: "^rb_thread_fd_select$"}
      - {action: ignore, from: "^rb_glob$"}
      - {action: ignore, from: "^rb_hash_tbl$"}
      - {action: ignore, from: "^rb_hash_foreach$"}
      - {action: ignore, from: "^rb_ivar_foreach$"}
      - {action: ignore, from: "^rb_mark_hash$"}
      - {action: ignore, from: "^rb_mark_set$"}
      - {action: ignore, from: "^rb_mark_tbl$"}
      - {action: ignore, from: "^rb_mark_tbl_no_pin$"}
      - {action: ignore, from: "^rb_set_end_proc$"}
      - {action: ignore, from: "^rb_st_"}
      - {action: ignore, from: "^rb_thread_wait_for$"}
      - {action: ignore, from: "^rb_timespec_now$"}
      - {action: ignore, from: "^rb_time_interval$"}
      - {action: ignore, from: "^rb_time_timespec_interval$"}
      - {action: ignore, from: "^rb_time_timespec_new$"}
      - {action: ignore, from: "^rb_time_timespec$"}
      - {action: ignore, from: "^rb_time_timeval$"}

      - {action: accept, from: "(?i)^rb_"}
      - {action: accept, from: "^RSTRING_"}

      # e.g.
      # * rb_special_const_p -> rbSpecialConstP (to camel case)
      # * rb_Integer -> rbInteger (to camel case)
      # * RB_SPECIAL_CONST_P -> RB_SPECIAL_CONST_P (no changed)
      - {transform: lower, from: ".*[a-z].*"}
      - {action: replace, from: "_([^_A-Z]+)", to: "$1", transform: title}

      - {transform: export}

    type:
      - {action: accept, from: "^fd_"}
      - {action: accept, from: "^rb_"}
      # - {action: accept, from: "^st_"}
      - {action: accept, from: "(?i)^ruby"}
      - {action: accept, from: "^ID$"}
      - {action: accept, from: "^VALUE$"}

      - {load: snakecase}
      - {transform: export}

    private:
      - {transform: unexport}

    post-global:
      - {action: doc, from: "^rb_fd_",   to: "https://github.com/ruby/ruby/blob/master/include/ruby/internal/intern/$path"}
      - {action: doc, from: "^rb_hash_", to: "https://github.com/ruby/ruby/blob/master/include/ruby/internal/$path"}
      - {action: doc, from: "^rb_proc_", to: "https://github.com/ruby/ruby/blob/master/include/ruby/internal/$path"}
      - {action: doc, from: "^st_",      to: "https://github.com/ruby/ruby/blob/master/include/$path"}
      - {action: doc, from: ".+",        to: "https://github.com/ruby/ruby/blob/master/include/ruby/$path"}
